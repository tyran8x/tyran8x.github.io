var I=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var C=(n,u)=>{var l={};for(var o in n)G.call(n,o)&&u.indexOf(o)<0&&(l[o]=n[o]);if(n!=null&&I)for(var o of I(n))u.indexOf(o)<0&&D.call(n,o)&&(l[o]=n[o]);return l};var B=(n,u,l)=>new Promise((o,r)=>{var a=t=>{try{c(l.next(t))}catch(i){r(i)}},s=t=>{try{c(l.throw(t))}catch(i){r(i)}},c=t=>t.done?o(t.value):Promise.resolve(t.value).then(a,s);c((l=l.apply(n,u)).next())});import{x as E,h as H,B as j,O as J,y as R,_ as T,u as Y,$ as d,T as Q,w as M,a as W,L as X}from"./bootstrap-C2g_f0uB.mjs";import{a1 as v,Y as m,ae as p,af as y,ag as f,ad as z,ah as $,a6 as e,aN as L,aO as U,aP as Z,M as P,S as ee,am as N,an as A,ax as h,m as b,F as te,ar as ae,aq as w,aJ as oe,ak as ne,T as le,at as se}from"../jse/index-index-DsynDTz_.mjs";const ue=v({__name:"PinInput",props:{class:{},modelValue:{},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},name:{},disabled:{type:Boolean},required:{type:Boolean},id:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue","complete"],setup(n,{emit:u}){const l=n,o=u,r=m(()=>{const t=l,{class:s}=t;return C(t,["class"])}),a=E(r,o);return(s,c)=>(p(),y(e(H),$(e(a),{class:e(L)("flex items-center gap-2",l.class)}),{default:f(()=>[z(s.$slots,"default")]),_:3},16,["class"]))}}),re=v({__name:"PinInputGroup",props:{class:{},asChild:{type:Boolean},as:{}},setup(n){const u=n,l=m(()=>{const s=u,{class:r}=s;return C(s,["class"])}),o=j(l);return(r,a)=>(p(),y(e(J),$(e(o),{class:e(L)("flex items-center",u.class)}),{default:f(()=>[z(r.$slots,"default")]),_:3},16,["class"]))}}),de=v({__name:"PinInputInput",props:{class:{},index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){const u=n,l=m(()=>{const s=u,{class:r}=s;return C(s,["class"])}),o=j(l);return(r,a)=>(p(),y(e(R),$(e(o),{class:e(L)("border-input bg-background relative flex h-10 w-10 items-center justify-center border-y border-r text-center text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md focus:relative focus:z-10 focus:outline-none focus:ring-2",u.class)}),null,16,["class"]))}}),ie={class:"relative mb-6"},ce=["for"],me={key:0,class:"text-destructive bottom-130 absolute mt-1 text-xs"},pe=v({inheritAttrs:!1,__name:"input",props:U({btnLoading:{type:Boolean,default:!1},btnText:{},class:{},codeLength:{default:6},errorTip:{},handleSendCode:{type:Function,default:()=>B(void 0,null,function*(){})},label:{},name:{},status:{}},{modelValue:{},modelModifiers:{}}),emits:U(["complete"],["update:modelValue"]),setup(n,{emit:u}){const l=n,o=u,r=Z(n,"modelValue"),a=P([]),s=m(()=>l.status==="error"?"border-destructive":"");ee(()=>r.value,()=>{var t,i;a.value=(i=(t=r.value)==null?void 0:t.split(""))!=null?i:[]});function c(t){r.value=t.join(""),o("complete")}return(t,i)=>(p(),N("div",ie,[A("label",{for:t.name,class:"mb-2 block text-sm font-medium"},h(t.label),9,ce),b(e(ue),{id:t.name,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=g=>a.value=g),class:oe([s.value,"flex justify-between"]),otp:"",placeholder:"â—‹",type:"number",onComplete:c},{default:f(()=>[b(e(re),null,{default:f(()=>[(p(!0),N(te,null,ae(t.codeLength,(g,V)=>(p(),y(e(de),{key:g,index:V},null,8,["index"]))),128))]),_:1}),b(e(T),{loading:t.btnLoading,class:"w-[300px] xl:w-full",size:"lg",variant:"outline",onClick:t.handleSendCode},{default:f(()=>[w(h(t.btnText),1)]),_:1},8,["loading","onClick"])]),_:1},8,["id","modelValue","class"]),t.status==="error"?(p(),N("p",me,h(t.errorTip),1)):ne("",!0)]))}}),fe={class:"text-muted-foreground"},be=v({name:"AuthenticationCodeLogin",__name:"code-login",props:{loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"}},emits:["submit"],setup(n,{emit:u}){const l=n,o=u,r=Y(),a=le({code:"",phoneNumber:"",requirePhoneNumber:!1,submitted:!1}),s=P(0),c=P(),t=m(()=>/^1[3-9]\d{9}$/.test(a.phoneNumber)),i=m(()=>s.value>0?d("authentication.sendText",[s.value]):d("authentication.sendCode")),g=m(()=>s.value>0),V=m(()=>(a.submitted||a.requirePhoneNumber)&&!t.value?"error":"default"),S=m(()=>a.submitted&&!a.code?"error":"default");function k(){a.submitted=!0,!(V.value!=="default"||S.value!=="default")&&o("submit",{code:a.code,phoneNumber:a.phoneNumber})}function F(){r.push(l.loginPath)}function K(){return B(this,null,function*(){if(!g.value){if(!t.value){a.requirePhoneNumber=!0;return}s.value=60,q()}})}function q(){s.value>0&&(c.value=setTimeout(()=>{s.value--,q()},1e3))}return se(()=>{s.value=0,clearTimeout(c.value)}),(O,_)=>(p(),N("div",null,[b(Q,null,{desc:f(()=>[A("span",fe,h(e(d)("authentication.codeSubtitle")),1)]),default:f(()=>[w(h(e(d)("authentication.welcomeBack"))+" ðŸ“² ",1)]),_:1}),b(e(W),{modelValue:a.phoneNumber,"onUpdate:modelValue":_[0]||(_[0]=x=>a.phoneNumber=x),autofocus:!0,"error-tip":e(d)("authentication.mobile-tip"),label:e(d)("authentication.mobile"),placeholder:e(d)("authentication.mobile"),status:V.value,name:"phoneNumber",type:"number",onKeyup:M(k,["enter"])},null,8,["modelValue","error-tip","label","placeholder","status"]),b(e(pe),{modelValue:a.code,"onUpdate:modelValue":_[1]||(_[1]=x=>a.code=x),"btn-loading":g.value,"btn-text":i.value,"code-length":4,"error-tip":e(d)("authentication.codeTip"),"handle-send-code":K,label:e(d)("authentication.code"),placeholder:e(d)("authentication.code"),status:S.value,name:"password",onKeyup:M(k,["enter"])},null,8,["modelValue","btn-loading","btn-text","error-tip","label","placeholder","status"]),b(e(T),{loading:O.loading,class:"mt-2 w-full",onClick:k},{default:f(()=>[w(h(e(d)("common.login")),1)]),_:1},8,["loading"]),b(e(T),{class:"mt-4 w-full",variant:"outline",onClick:_[2]||(_[2]=x=>F())},{default:f(()=>[w(h(e(d)("common.back")),1)]),_:1})]))}}),ve=v({name:"CodeLogin",__name:"code-login",setup(n){const u=P(!1);function l(o){return B(this,null,function*(){console.log(o)})}return(o,r)=>(p(),y(e(be),{loading:u.value,"login-path":e(X),onSubmit:l},null,8,["loading","login-path"]))}});export{ve as default};
